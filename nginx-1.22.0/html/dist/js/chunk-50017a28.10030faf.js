(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50017a28"],{4531:function(e,t,a){"use strict";a("9bc0")},"9bc0":function(e,t,a){},f989:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("Card",[a("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:"","label-width":100}},[a("Row",{staticClass:"operation"},[a("Form-item",{attrs:{label:"API接口前缀"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"text",clearable:"",placeholder:"如 test"},model:{value:e.apiPreStr,callback:function(t){e.apiPreStr=t},expression:"apiPreStr"}})],1),a("Button",{attrs:{type:"warning",size:"small",ghost:"",shape:"circle",icon:"ios-construct"},on:{click:function(t){e.findBackFieldModal=!0}}},[e._v("读取")]),a("Button",{attrs:{loading:e.createCodeLoading,size:"small",ghost:"",shape:"circle",type:"success",icon:"md-send"},on:{click:e.generate}},[e._v("生成")]),a("Button",{attrs:{size:"small",type:"error",ghost:"",shape:"circle",icon:"md-trash"},on:{click:e.clear}},[e._v("清空")])],1)],1),a("Row",[a("Col",{attrs:{span:"24"}},[a("Table",{ref:"table",attrs:{border:"",stripe:"",size:"large",columns:e.columns,data:e.data},scopedSlots:e._u([{key:"field",fn:function(t){var n=t.row;return[a("Input",{on:{"on-blur":function(t){return e.changeField(n,t)}},model:{value:n.field,callback:function(t){e.$set(n,"field",t)},expression:"row.field"}})]}},{key:"name",fn:function(t){var n=t.row;return[a("Input",{on:{"on-blur":function(t){return e.changeName(n,t)}},model:{value:n.name,callback:function(t){e.$set(n,"name",t)},expression:"row.name"}})]}},{key:"tableShow",fn:function(t){var n=t.row;return[a("i-switch",{on:{"on-change":function(t){return e.changeTableShow(n,t)}},model:{value:n.tableShow,callback:function(t){e.$set(n,"tableShow",t)},expression:"row.tableShow"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"editable",fn:function(t){var n=t.row;return[a("i-switch",{on:{"on-change":function(t){return e.changeEditable(n,t)}},model:{value:n.editable,callback:function(t){e.$set(n,"editable",t)},expression:"row.editable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"type",fn:function(t){var n=t.row;return[a("Select",{attrs:{disabled:!n.editable,transfer:""},on:{"on-change":function(t){return e.changeType(n,t)}},model:{value:n.type,callback:function(t){e.$set(n,"type",t)},expression:"row.type"}},[a("Option",{attrs:{value:"text"}},[e._v("文本输入框")]),a("Option",{attrs:{value:"select"}},[e._v("选择下拉框")]),a("Option",{attrs:{value:"number"}},[e._v("数字输入框")]),a("Option",{attrs:{value:"date"}},[e._v("日期选择器")]),a("Option",{attrs:{value:"daterange"}},[e._v("日期范围选择器")]),a("Option",{attrs:{value:"upload"}},[e._v("图片上传输入组件")]),a("Option",{attrs:{value:"uploadThumb"}},[e._v("图片上传缩略图组件")]),a("Option",{attrs:{value:"switch"}},[e._v("开关")]),a("Option",{attrs:{value:"radio"}},[e._v("单选框")]),a("Option",{attrs:{value:"time"}},[e._v("时间选择器")]),a("Option",{attrs:{value:"area"}},[e._v("省市县级联")])],1)]}},{key:"validate",fn:function(t){var n=t.row;return[a("i-switch",{attrs:{disabled:!n.editable},on:{"on-change":function(t){return e.changeValidate(n,t)}},model:{value:n.validate,callback:function(t){e.$set(n,"validate",t)},expression:"row.validate"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"searchable",fn:function(t){var n=t.row;return[a("i-switch",{on:{"on-change":function(t){return e.changeSearchable(n,t)}},model:{value:n.searchable,callback:function(t){e.$set(n,"searchable",t)},expression:"row.searchable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"searchType",fn:function(t){var n=t.row;return[a("Select",{attrs:{disabled:!n.searchable,transfer:""},on:{"on-change":function(t){return e.changeSearchType(n,t)}},model:{value:n.searchType,callback:function(t){e.$set(n,"searchType",t)},expression:"row.searchType"}},[a("Option",{attrs:{value:"text"}},[e._v("文本输入框")]),a("Option",{attrs:{value:"select"}},[e._v("选择下拉框")]),a("Option",{attrs:{value:"daterange",disabled:e.daterangeSearch}},[e._v("日期范围选择器")]),a("Option",{attrs:{value:"date"}},[e._v("日期选择器")]),a("Option",{attrs:{value:"area"}},[e._v("省市县级联")])],1)]}},{key:"sortable",fn:function(t){var n=t.row;return[a("i-switch",{on:{"on-change":function(t){return e.changeSortable(n,t)}},model:{value:n.sortable,callback:function(t){e.$set(n,"sortable",t)},expression:"row.sortable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"defaultSort",fn:function(t){var n=t.row;return[a("i-switch",{attrs:{disabled:(!n.sortable||e.defaultSort)&&!n.defaultSort||!n.sortable},on:{"on-change":function(t){return e.changeDefaultSort(n,t)}},model:{value:n.defaultSort,callback:function(t){e.$set(n,"defaultSort",t)},expression:"row.defaultSort"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"defaultSortType",fn:function(t){var n=t.row;return[a("Select",{attrs:{disabled:!n.defaultSort||!n.sortable,transfer:""},on:{"on-change":function(t){return e.changeDefaultSortType(n,t)}},model:{value:n.defaultSortType,callback:function(t){e.$set(n,"defaultSortType",t)},expression:"row.defaultSortType"}},[a("Option",{attrs:{value:"desc"}},[e._v("倒序")]),a("Option",{attrs:{value:"asc"}},[e._v("正序")])],1)]}},{key:"action",fn:function(t){var n=t.row;return[a("Button",{attrs:{type:"error",ghost:"",size:"small"},on:{click:function(t){return e.remove(n)}}},[e._v("删除")])]}}])})],1)],1)],1),a("Modal",{attrs:{title:"读取后端字段",width:800},on:{"on-ok":e.submitEntityData},model:{value:e.findBackFieldModal,callback:function(t){e.findBackFieldModal=t},expression:"findBackFieldModal"}},[a("Form",{ref:"entityForm",attrs:{model:e.entityForm,"label-width":130,rules:e.entityFormValidate}},[a("FormItem",{attrs:{label:"实体类引用路径",prop:"path"}},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Input",{staticStyle:{width:"410px"},attrs:{placeholder:"例如：cn.zwz.modules.base.entity.User",clearable:""},model:{value:e.entityForm.path,callback:function(t){e.$set(e.entityForm,"path",t)},expression:"entityForm.path"}}),a("Button",{attrs:{type:"warning",icon:"md-play"},on:{click:e.generateEntityData}},[e._v("读取字段")])],1)],1)],1),a("Input",{staticStyle:{"max-height":"50vh",overflow:"auto"},attrs:{type:"textarea",autosize:"",placeholder:"生成结果"},model:{value:e.findBackFieldContent,callback:function(t){e.findBackFieldContent=t},expression:"findBackFieldContent"}})],1),a("Modal",{attrs:{title:"生成代码",width:1e3,styles:"top:30px"},model:{value:e.codeModal,callback:function(t){e.codeModal=t},expression:"codeModal"}},[a("Tabs",{attrs:{type:"card"},on:{"on-click":e.changeCode},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("TabPane",{attrs:{name:"index.vue",label:"index.vue"}}),a("TabPane",{attrs:{name:"add.vue",label:"add.vue"}}),a("TabPane",{attrs:{name:"edit.vue",label:"edit.vue"}}),a("TabPane",{attrs:{name:"api.js",label:"api.js"}})],1),a("Input",{staticStyle:{"max-height":"60vh",overflow:"auto"},attrs:{type:"textarea",autosize:""},model:{value:e.createCodeContent,callback:function(t){e.createCodeContent=t},expression:"createCodeContent"}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.createCodeContent,expression:"createCodeContent",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"primary",icon:"md-copy"}},[e._v("复制代码")])],1)],1)],1)},s=[],i=a("7f80");const r=(e,t,a)=>Object(i["c"])(`/generate/table/${e}/${t}`,a),l=(e,t)=>Object(i["b"])("/generate/getEntityData/"+e,t);var o={name:"vue-code",data(){return{tabName:"index.vue",findBackFieldModal:!1,findBackFieldContent:"",entityForm:{path:""},createCodeLoading:!1,createCodeContent:"",apiPreStr:"",codeModal:!1,form:{sortOrder:0,field:"",name:"",level:"2",tableShow:!0,editable:!0,type:"text",searchType:"text",searchLevel:"2",validate:!0,searchable:!1,sortable:!1,defaultSort:!1,defaultSortType:"desc"},formValidate:{field:[{required:!0,message:"不能为空",trigger:"blur"}],name:[{required:!0,message:"不能为空",trigger:"blur"}]},entityFormValidate:{path:[{required:!0,message:"不能为空",trigger:"blur"}]},columns:[{title:"编号",key:"sortOrder",sortType:"asc",sortable:!0,align:"center",minWidth:90},{title:"后端字段名",slot:"field",minWidth:150},{title:"备注",slot:"name",minWidth:150},{title:"表格显示",slot:"tableShow",minWidth:110},{title:"可添加编辑",slot:"editable",minWidth:110},{title:"输入组件",slot:"type",minWidth:200},{title:"非空",slot:"validate",minWidth:125},{title:"搜索",slot:"searchable",minWidth:100},{title:"搜索组件",slot:"searchType",minWidth:160},{title:"排序",slot:"sortable",minWidth:80},{title:"默认排序",slot:"defaultSort",minWidth:100},{title:"默认排序方式",slot:"defaultSortType",minWidth:150},{title:"操作",slot:"action",align:"center",fixed:"right",width:90}],data:[],defaultSort:!1,daterangeSearch:!1,result:{}}},methods:{init(){let e=this.getStore("tableData"),t=this.getStore("createCodeApiPre"),a=this.getStore("tableDefaultSort"),n=this.getStore("tableDaterangeSearch");e&&"undefined"!=e&&(this.data=JSON.parse(e)),t&&"undefined"!=t&&(this.apiPreStr=t),a&&"undefined"!=a&&(this.defaultSort="true"==a),n&&"undefined"!=n&&(this.daterangeSearch="true"==n)},generateEntityData(){this.$refs.entityForm.validate(e=>{e&&l(this.entityForm.path).then(e=>{e.success&&(this.findBackFieldContent=e.result)})})},submitEntityData(){if(this.findBackFieldContent)try{let e=JSON.parse(this.findBackFieldContent);this.data=e.data,this.findBackFieldModal=!1}catch(e){this.$Message.error("后端实体类解析异常: "+e)}else this.$Message.warning("后端实体类没有读到，请重试")},changeField(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.field=t.target.value,this.data.splice(e._index,1,n),this.save()},changeName(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.name=t.target.value,this.data.splice(e._index,1,n),this.save()},changeTableShow(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.tableShow=t,this.data.splice(e._index,1,n),this.save()},changeType(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.type=t,this.data.splice(e._index,1,n),this.save()},changeEditable(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.editable=t,this.data.splice(e._index,1,n),this.save()},changeValidate(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.validate=t,this.data.splice(e._index,1,n),this.save()},changeSearchable(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.searchable=t,this.data.splice(e._index,1,n),this.save()},changeSearchType(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.searchType=t,this.data.splice(e._index,1,n),this.daterangeSearch&&"daterange"!=t?this.daterangeSearch=!1:"daterange"==t&&(this.daterangeSearch=!0),this.save()},changeSortable(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.sortable=t,this.data.splice(e._index,1,n),this.save()},changeDefaultSort(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);this.defaultSort&&t?(this.$Message.warning("已设定了默认排序的字段，请勿设置多个"),n.defaultSort=!1):!this.defaultSort&&t?(n.defaultSort=!0,this.defaultSort=!0):this.defaultSort&&!t&&(n.defaultSort=!1,this.defaultSort=!1),this.data.splice(e._index,1,n),this.save()},changeDefaultSortType(e,t){for(let s in e)null==e[s]&&(e[s]="");let a=JSON.stringify(e),n=JSON.parse(a);n.defaultSortType=t,this.data.splice(e._index,1,n),this.save()},remove(e){this.data.splice(e._index,1),this.save(),this.$Message.success("删除成功")},clear(){this.$Modal.confirm({title:"确认清空",content:"您确认要清空 ?",onOk:()=>{this.data=[],this.apiPreStr="",this.defaultSort=!1,this.daterangeSearch=!1,this.save(),this.$Message.success("清空成功")}})},generate(){this.apiPreStr?(this.createCodeLoading=!0,r(this.apiPreStr,"1",this.data).then(e=>{this.createCodeLoading=!1,e.success&&(this.result=e.result,this.changeCode(),this.codeModal=!0,this.save())})):this.$Message.warning("接口前缀不能为空")},changeCode(){"index.vue"==this.tabName&&(this.createCodeContent=this.result.componentApi),"add.vue"==this.tabName&&(this.createCodeContent=this.result.addApi),"edit.vue"==this.tabName&&(this.createCodeContent=this.result.editApi),"api.js"==this.tabName&&(this.createCodeContent=this.result.api)},onCopy(){this.$Message.success("复制成功")},save(){this.setStore("tableData",JSON.stringify(this.data)),this.setStore("createCodeApiPre",this.apiPreStr),this.setStore("tableDefaultSort",this.defaultSort),this.setStore("tableDaterangeSearch",this.daterangeSearch)}},mounted(){this.init()}},c=o,d=(a("4531"),a("2877")),u=Object(d["a"])(c,n,s,!1,null,null,null);t["default"]=u.exports}}]);