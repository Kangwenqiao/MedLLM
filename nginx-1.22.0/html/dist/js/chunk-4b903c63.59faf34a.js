(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b903c63"],{3566:function(e,t,r){},"68b4":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search"},[r("Card",[r("Row",{directives:[{name:"show",rawName:"v-show",value:e.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}}},[r("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:"","label-width":0}},[r("Form-item",{ref:"searchForm",staticStyle:{display:"flex"},attrs:{model:e.searchForm,inline:"","label-width":0}},[r("Form-item",{attrs:{label:"",prop:"doctorName"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"医生姓名",clearable:""},model:{value:e.searchForm.doctorName,callback:function(t){e.$set(e.searchForm,"doctorName",t)},expression:"searchForm.doctorName"}})],1),r("Form-item",{attrs:{label:"",prop:"postLevel"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"职称",clearable:""},model:{value:e.searchForm.postLevel,callback:function(t){e.$set(e.searchForm,"postLevel",t)},expression:"searchForm.postLevel"}})],1),r("Form-item",{attrs:{label:""}},[r("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"所属科室"},model:{value:e.searchForm.subjectId,callback:function(t){e.$set(e.searchForm,"subjectId",t)},expression:"searchForm.subjectId"}},e._l(e.subList,(function(t,a){return r("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.subName))])})),1)],1),r("Form-item",{staticClass:"br",staticStyle:{"margin-left":"10px"}},[r("Button",{attrs:{type:"primary",icon:"ios-search",size:"small",ghost:""},on:{click:e.handleSearch}},[e._v("搜索")]),r("Button",{attrs:{type:"warning",size:"small",icon:"md-refresh",ghost:""},on:{click:e.handleReset}},[e._v("重置")])],1),r("Form-item",{staticStyle:{position:"fixed",right:"50px",top:"130px"}},[r("Button",{staticClass:"showFilterPanelFlag",attrs:{type:"info",icon:"md-settings",size:"small",ghost:""},on:{click:function(t){e.showFilterPanelFlag=!e.showFilterPanelFlag}}},[e._v(" 列筛选")]),r("Button",{staticClass:"showFilterPanelFlag",attrs:{type:"warning",icon:"ios-help-circle-outline",size:"small",ghost:""},on:{click:function(t){e.modal1=!0}}},[e._v(" 使用教程")]),r("Modal",{attrs:{title:"使用教程"},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[r("p",[e._v("1.XXXXXXXXXXXXXXXXXXXXXXXX")]),r("p",[e._v("2.XXXXXXXXXXXXXXXXXXXXXXXX")]),r("p",[e._v("3.XXXXXXXXXXXXXXXXXXXXXXXX")])])],1)],1)],1)],1),r("Row",{staticClass:"operation",staticStyle:{position:"relative"}},[r("transition",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showFilterPanelFlag,expression:"showFilterPanelFlag"}],staticClass:"filter-panel"},[r("CheckboxGroup",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.mycolumns,(function(e){return r("div",{key:e.key},[r("Checkbox",{staticStyle:{margin:"2px 5px"},attrs:{label:e.title}})],1)})),0)],1)])],1),r("Row",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}]}),r("Row",[r("Table",{ref:"table",attrs:{loading:e.loading,height:e.tableHeight,border:"",stripe:"",size:"small",columns:e.columns,data:e.data,sortable:"custom","row-class-name":e.rowClassNmae},on:{"on-sort-change":e.changeSort,"on-selection-change":e.changeSelect,"on-row-click":e.rowClick}})],1),r("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[r("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[15,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),r("Modal",{attrs:{width:"750",title:"医生放号","ok-text":"确认放号"},on:{"on-ok":e.addNumberFxFx},model:{value:e.orderModal,callback:function(t){e.orderModal=t},expression:"orderModal"}},[r("Form",{attrs:{"label-width":100,"label-position":"left"}},[r("Row",[r("FormItem",{attrs:{label:"医生姓名"}},[r("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.zwzSelecrDoctor.doctorName,callback:function(t){e.$set(e.zwzSelecrDoctor,"doctorName",t)},expression:"zwzSelecrDoctor.doctorName"}})],1)],1),r("Row",[r("FormItem",{attrs:{label:"放号日期"}},[r("DatePicker",{staticStyle:{width:"570px"},attrs:{placeholder:e.zwzOrderDate,clearable:""},on:{"on-change":e.changeAddNumberDate}})],1)],1),r("Row",[r("FormItem",{attrs:{label:"放号时段"}},[r("Select",{staticStyle:{width:"570px"},attrs:{placeholder:"请选择放号时段"},model:{value:e.zwzOrderStep,callback:function(t){e.zwzOrderStep=t},expression:"zwzOrderStep"}},[r("Option",{attrs:{value:"0"}},[e._v("上午")]),r("Option",{attrs:{value:"1"}},[e._v("下午")])],1)],1)],1),r("Row",[r("FormItem",{attrs:{label:"放号个数"}},[r("InputNumber",{staticStyle:{width:"570px"},attrs:{max:100,min:1,placeholder:"请输入放号个数"},model:{value:e.zwzOrderNumber,callback:function(t){e.zwzOrderNumber=t},expression:"zwzOrderNumber"}})],1)],1)],1)],1),r("Modal",{attrs:{width:"950",title:"查询医生放号情况","footer-hide":""},model:{value:e.orderFindModal,callback:function(t){e.orderFindModal=t},expression:"orderFindModal"}},[r("Row",{directives:[{name:"show",rawName:"v-show",value:e.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}}},[r("Form",{ref:"orderSearchForm",attrs:{model:e.orderSearchForm,inline:"","label-width":0}},[r("Form-item",{ref:"searchForm",staticStyle:{display:"flex"},attrs:{model:e.searchForm,inline:"","label-width":0}},[r("Form-item",{attrs:{label:""}},[r("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"放号时段"},model:{value:e.orderSearchForm.step,callback:function(t){e.$set(e.orderSearchForm,"step",t)},expression:"orderSearchForm.step"}},[r("Option",{attrs:{value:"0"}},[e._v("上午")]),r("Option",{attrs:{value:"1"}},[e._v("下午")])],1)],1),r("Form-item",{attrs:{label:""}},[r("DatePicker",{staticStyle:{width:"120px"},attrs:{placeholder:e.orderSearchForm.date,clearable:""},on:{"on-change":e.changeAddNumberDate2}})],1),r("Form-item",{staticClass:"br",staticStyle:{"margin-left":"10px"}},[r("Button",{attrs:{type:"primary",icon:"ios-search",size:"small",ghost:""},on:{click:e.getDoctorSchedulingListFx}},[e._v("搜索")])],1)],1)],1)],1),r("Row",[r("Col",{attrs:{span:"24"}},[r("Table",{attrs:{loading:e.loading,height:e.tableHeight,border:"",stripe:"",size:"small",columns:e.orderColumns,data:e.orderData}})],1)],1),r("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[r("Page",{attrs:{current:e.orderSearchForm.pageNumber,total:e.orderTotal,"page-size":e.orderSearchForm.pageSize,"page-size-opts":[15,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changeOrderPage,"on-page-size-change":e.changeOrderPageSize}})],1)],1)],1)},o=[],i=r("7f80");const s=e=>Object(i["b"])("/doctor/getByPage",e),l=e=>Object(i["b"])("/hospitalSubject/getAll",e),c=e=>Object(i["e"])("/doctorScheduling/addNumber",e),n=e=>Object(i["b"])("/doctorScheduling/getByPage",e);var d={name:"single-window",components:{},data(){return{orderData:[],orderFindModal:!1,orderModal:!1,tableHeight:0,selected:["选择","序号","医生姓名","医生年龄","学历学位","开始工作时间","所属医院","职称","专业","所属科室","医生介绍","创建时间","创建者","修改时间","修改者","操作"],modal1:!1,openSearch:!0,openTip:!0,formData:{},loading:!0,searchForm:{pageNumber:1,pageSize:15,sort:"createTime",order:"desc"},selectList:[],selectCount:0,selectRow:0,zwzSelecrDoctor:{id:""},orderColumns:[{title:"序号",width:85,align:"center",fixed:"left",sortType:!0,render:(e,t)=>e("span",t.index+(this.orderSearchForm.pageNumber-1)*this.orderSearchForm.pageSize+1)},{title:"医生姓名",key:"doctorName",minWidth:120,tooltip:!0,sortable:!1},{title:"就诊日期",key:"date",minWidth:120,tooltip:!0},{title:"就诊时段",key:"step",minWidth:120,tooltip:!0},{title:"排号",key:"number",minWidth:120,tooltip:!0},{title:"预约情况",key:"orderFlag",minWidth:120,tooltip:!0,render:(e,t)=>0==t.row.orderFlag?e("div",[e("span",{style:{color:"#3CB371"}},"未预约")]):e("div",[e("span",{style:{color:"#ff0000"}},"已预约")])}],columns:[{type:"selection",width:60,title:"选择",align:"center",fixed:"left"},{title:"序号",width:85,align:"center",fixed:"left",sortType:!0,render:(e,t)=>e("span",t.index+(this.searchForm.pageNumber-1)*this.searchForm.pageSize+1)},{title:"医生姓名",key:"doctorName",minWidth:120,tooltip:!0,sortable:!1},{title:"医生年龄",key:"age",minWidth:120,tooltip:!0,sortable:!1},{title:"学历学位",key:"education",minWidth:120,tooltip:!0,sortable:!1},{title:"开始工作时间",key:"workDate",minWidth:120,tooltip:!0,sortable:!1},{title:"所属医院",key:"university",minWidth:120,tooltip:!0,sortable:!1},{title:"职称",key:"postLevel",minWidth:120,tooltip:!0,sortable:!1},{title:"专业",key:"major",minWidth:120,tooltip:!0,sortable:!1},{title:"所属科室",key:"subjectName",minWidth:120,tooltip:!0,sortable:!1},{title:"医生介绍",key:"about",minWidth:120,tooltip:!0,sortable:!1},{title:"创建时间",key:"createTime",sortable:!0,sortType:"desc",minWidth:180,align:"center",tooltip:!0},{title:"创建者",key:"createBy",sortable:!0,sortType:"desc",minWidth:100,align:"center",tooltip:!0},{title:"修改时间",key:"updateTime",minWidth:180,align:"center",tooltip:!0},{title:"修改者",key:"updateBy",minWidth:100,align:"center",tooltip:!0},{title:"操作",key:"action",align:"center",width:200,fixed:"right",render:(e,t)=>e("div",[e("Button",{props:{type:"primary",size:"small",icon:"ios-create-outline",ghost:!0},style:{marginRight:"5px"},on:{click:()=>{this.addNumberFx(t.row)}}},"放号"),e("Button",{props:{type:"error",size:"small",icon:"md-trash",ghost:!0},on:{click:()=>{this.getDoctorSchedulingListFxFx(t.row)}}},"查询")])}],data:[],pageNumber:1,pageSize:10,total:0,orderTotal:0,showFilterPanelFlag:!1,zwzOrderDate:"",zwzOrderStep:"0",zwzOrderNumber:1,orderSearchForm:{pageNumber:1,pageSize:15,sort:"createTime",order:"asc",doctorId:"",date:"",step:""},subList:[]}},methods:{init(){this.getDataList(),this.getAllHospitalSubjectListFx()},getAllHospitalSubjectListFx(){var e=this;l().then(t=>{t.success&&(e.subList=t.result)})},changeAddNumberDate(e){this.zwzOrderDate=e},changeAddNumberDate2(e){this.orderSearchForm.date=e},getDoctorSchedulingListFxFx(e){this.orderSearchForm.doctorId=e.id,this.getDoctorSchedulingListFx(),this.orderFindModal=!0},getDoctorSchedulingListFx(){var e=this;n(e.orderSearchForm).then(t=>{t.success&&(e.orderData=t.result.records,e.orderTotal=t.result.total)})},addNumberFxFx(){var e=this;c({doctorId:e.zwzSelecrDoctor.id,date:e.zwzOrderDate,step:e.zwzOrderStep,number:e.zwzOrderNumber}).then(e=>{e.success&&this.$Message.success("放号成功")})},addNumberFx(e){this.zwzSelecrDoctor=e,this.zwzOrderDate=(new Date).getFullYear()+"-"+((new Date).getMonth()>8?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1))+"-"+((new Date).getDate()>9?(new Date).getDate():"0"+(new Date).getDate()),this.orderModal=!0},submited(){this.getDataList()},changePage(e){this.searchForm.pageNumber=e,this.getDataList(),this.clearSelectAll()},changePageSize(e){this.searchForm.pageSize=e,this.getDataList()},changeOrderPage(e){this.orderSearchForm.pageNumber=e,this.getDoctorSchedulingListFx()},changeOrderPageSize(e){this.orderSearchForm.pageSize=e,this.getDoctorSchedulingListFx()},rowClick(e,t){this.selectRow=e},rowClassNmae(e,t){return e.id==this.selectRow.id?"rowClassNmaeColor":""},handleSearch(){this.searchForm.pageNumber=1,this.searchForm.pageSize=15,this.getDataList()},handleReset(){this.searchForm={pageNumber:1,pageSize:15,sort:"createTime",order:"desc"},this.getDataList()},changeSort(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"===e.order&&(this.searchForm.order=""),this.getDataList()},clearSelectAll(){this.$refs.table.selectAll(!1)},changeSelect(e){this.selectList=e,this.selectCount=e.length},getDataList(){this.loading=!0,s(this.searchForm).then(e=>{this.loading=!1,e.success&&(this.data=e.result.records,this.total=e.result.total)})}},mounted(){this.init(),this.tableHeight=Number(window.innerHeight-273),this.mycolumns=this.columns;let e=[];for(var t=0;t<this.selected.length;t++)for(var r=this.selected[t],a=0;a<this.columns.length;a++)this.columns[a].title==r&&e.push(this.columns[a]);this.columns=e},watch:{selected:function(e){let t=[];for(var r=0;r<this.mycolumns.length;r++){var a=this.mycolumns[r];(void 0==a.title||e.includes(a.title))&&t.push(a)}this.columns=t}}},h=d,m=(r("a841"),r("2877")),p=Object(m["a"])(h,a,o,!1,null,null,null);t["default"]=p.exports},a841:function(e,t,r){"use strict";r("3566")}}]);