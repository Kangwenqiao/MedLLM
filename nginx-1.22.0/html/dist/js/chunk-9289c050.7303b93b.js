(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9289c050","chunk-1440a169"],{"05a5":function(t,s,e){},"478f":function(t,s,e){},"5fe9":function(t,s,e){"use strict";e("05a5")},c22b:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("Card",{staticClass:"change-pass"},[e("p",{attrs:{slot:"title"},slot:"title"},[e("Icon",{attrs:{type:"key"}}),t._v("修改密码 ")],1),e("div",[e("Form",{ref:"editPasswordForm",staticStyle:{width:"450px"},attrs:{model:t.editPasswordForm,"label-width":100,"label-position":"right",rules:t.passwordValidate}},[e("FormItem",{attrs:{label:"原密码",prop:"oldPass"}},[e("Input",{attrs:{type:"password",placeholder:"请输入现在使用的密码"},model:{value:t.editPasswordForm.oldPass,callback:function(s){t.$set(t.editPasswordForm,"oldPass",s)},expression:"editPasswordForm.oldPass"}})],1),e("FormItem",{attrs:{label:"新密码",prop:"newPass"}},[e("SetPassword",{on:{"on-change":t.changeInputPass},model:{value:t.editPasswordForm.newPass,callback:function(s){t.$set(t.editPasswordForm,"newPass",s)},expression:"editPasswordForm.newPass"}})],1),e("FormItem",{attrs:{label:"确认新密码",prop:"rePass"}},[e("Input",{attrs:{type:"password",placeholder:"请再次输入新密码"},model:{value:t.editPasswordForm.rePass,callback:function(s){t.$set(t.editPasswordForm,"rePass",s)},expression:"editPasswordForm.rePass"}})],1),e("FormItem",[e("Button",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{type:"primary",loading:t.savePassLoading},on:{click:t.saveEditPass}},[t._v("保存")]),e("Button",{on:{click:t.cancelEditPass}},[t._v("取消")])],1)],1)],1)])],1)},r=[],n=e("7f80");const i=t=>Object(n["e"])("/user/modifyPass",t);var o=e("d8ee"),l={name:"change_pass",components:{SetPassword:o["default"]},data(){const t=(t,s,e)=>{s!==this.editPasswordForm.newPass?e(new Error("两次输入密码不一致")):e()};return{savePassLoading:!1,editPasswordForm:{oldPass:"",newPass:"",rePass:""},strength:"",passwordValidate:{oldPass:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPass:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"请至少输入6个字符",trigger:"blur"},{max:32,message:"最多输入32个字符",trigger:"blur"}],rePass:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{changeInputPass(t,s,e){this.strength=e},saveEditPass(){let t={password:this.editPasswordForm.oldPass,newPass:this.editPasswordForm.newPass,passStrength:this.strength};this.$refs["editPasswordForm"].validate(s=>{s&&(this.savePassLoading=!0,i(t).then(t=>{this.savePassLoading=!1,t.success&&this.$Modal.success({title:"修改密码成功",content:"修改密码成功，需重新登录",onOk:()=>{this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})}})}))})},cancelEditPass(){this.$store.commit("removeTag","password"),localStorage.pageOpenedList=JSON.stringify(this.$store.state.app.pageOpenedList);let t="",s=this.$store.state.app.pageOpenedList.length;t=s>1?this.$store.state.app.pageOpenedList[s-1].name:this.$store.state.app.pageOpenedList[0].name,this.$router.push({name:t})}},mounted(){}},d=l,h=(e("ee3f"),e("2877")),u=Object(h["a"])(d,a,r,!1,null,null,null);s["default"]=u.exports},d8ee:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"set-password"},[e("Poptip",{attrs:{transfer:"",trigger:"focus",placement:"right",width:"250"}},[e("Input",{attrs:{type:"password",password:"",maxlength:t.maxlength,size:t.size,placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly},on:{"on-change":t.handleChange},model:{value:t.currentValue,callback:function(s){t.currentValue=s},expression:"currentValue"}}),e("div",{class:t.tipStyle,attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"words"},[t._v("强度 : "+t._s(t.strength))]),e("Progress",{staticStyle:{margin:"13px 0"},attrs:{percent:t.strengthValue,status:t.progressStatus,"hide-info":""}})],1)],1)],1)},r=[],n={name:"setPassword",props:{value:String,size:String,placeholder:{type:String,default:"请输入密码，长度为6-20个字符"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:{type:Number,default:20}},data(){return{currentValue:this.value,tipStyle:"password-tip-none",strengthValue:0,progressStatus:"normal",strength:"无",grade:0}},methods:{checkStrengthValue(t){let s=0;return/\d/.test(t)&&s++,/[a-z]/.test(t)&&s++,/[A-Z]/.test(t)&&s++,/\W/.test(t)&&s++,t.length>=10&&s++,this.grade=s,s},strengthChange(){if(!this.currentValue)return this.tipStyle="password-tip-none",this.strength="无",void(this.strengthValue=0);let t=this.checkStrengthValue(this.currentValue);t<=1?(this.progressStatus="wrong",this.tipStyle="password-tip-weak",this.strength="弱",this.strengthValue=33):t>=2&&t<=4?(this.progressStatus="normal",this.tipStyle="password-tip-middle",this.strength="中",this.strengthValue=66):(this.progressStatus="success",this.tipStyle="password-tip-strong",this.strength="强",this.strengthValue=100)},handleChange(t){this.strengthChange(),this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue,this.grade,this.strength)},setCurrentValue(t){t!==this.currentValue&&(this.currentValue=t,this.strengthChange(),this.$emit("on-change",this.currentValue,this.grade,this.strength))}},watch:{value(t){this.setCurrentValue(t)}}},i=n,o=(e("5fe9"),e("2877")),l=Object(o["a"])(i,a,r,!1,null,null,null);s["default"]=l.exports},ee3f:function(t,s,e){"use strict";e("478f")}}]);